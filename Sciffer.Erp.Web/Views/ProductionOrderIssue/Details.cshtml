
@model Sciffer.Erp.Domain.ViewModel.ProdIssueVM
@using Newtonsoft.Json
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <div id="ProductionIssueDetail"></div>
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.prod_order_id, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.DropDownList("prod_order_id", (System.Web.Mvc.SelectList)ViewBag.ProdOrdList, "--Select--", htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.prod_order_id, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
            @*<div class="col-lg-6 col-sm-6">
                <div class="form-group">
                    <input type="button" value="Select Production Order" name="mrn" id="mrn" class="btn btn-primary" />
                </div>
            </div>*@
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.category_id, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.DropDownList("category_id", (System.Web.Mvc.SelectList)ViewBag.categorylist, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.category_id, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.plant_id, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.DropDownList("plant_id", (System.Web.Mvc.SelectList)ViewBag.PlantList, "--Select--", htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.plant_id, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.posting_date, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.EditorFor(model => model.posting_date, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.posting_date, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.document_date, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.EditorFor(model => model.document_date, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.document_date, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    @Html.LabelFor(model => model.remarks, htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="col-md-8">
                        @Html.EditorFor(model => model.remarks, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.remarks, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>
        </div>

    </div>
    <br />
    <div class="panel panel-body" role="tabpanel" data-example-id="togglable-tabs">
        <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
            <li class="active"><a data-toggle="tab" href="#sectionA">Tag Items</a></li>
            <li><a data-toggle="tab" href="#sectionB">Non Tag Items</a></li>
        </ul>
        <div class="tab-content">
            <div id="sectionA" class="tab-pane fade in active">
                <div class="row">
                    <div class="table-responsive">
                        <table class="table table-responsive table-bordered table-striped" id="ContactGrid">
                        </table>
                    </div>
                </div>
            </div>
            <div id="sectionB" class="fade" >
                <div class="row">
                    <div class="table-responsive">
                        <table class="table table-responsive table-bordered table-striped" id="non_tag"></table>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<style>
    table.dataTable {
        clear: both;
        margin-bottom: -1px !important;
    }
 
</style>
<div>
    @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-primary" })
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        $(document).ready(function(){
            var tag_details = @Html.Raw(JsonConvert.SerializeObject(this.Model.Prod_order_issue_detail_tagitems));
            var nontag_details = @Html.Raw(JsonConvert.SerializeObject(this.Model.Prod_order_issue_detail_nontagitems));
            $('#ContactGrid').DataTable({
                bFilter: false, bInfo: false,
                "bPaginate": false,
                "ordering": false,
                "bfooter": false,
                bSortable: false,
                "info": false,
                "sScrollY": "350px",
                "aaData": tag_details,
                "bAutoWidth": false,
                "columns": [
                      { "data": "", sWidth: "5%", "title": "Sr No.", "defaultContent": "", "bSortable": false },
                      { "data": "item_code", "title": "Item Code", "bSortable": false },
                      { "data": "item_desc", "title": "Item Description", "bSortable": false },
                      { "data": "batch_number", bVisible: true, "title": "Batch Number","bSortable": false },
                      { "data": "tag_no", "title": "Tag No", "bSortable": false },
                      { "data": "required_qty", bVisible: true, "title": "Req Quantity" ,sClass:"right","bSortable": false},
                      { "data": "rate", bVisible: true, "title": "Rate",sClass:"right","bSortable": false },
                      { "data": "value", bVisible: true, "title": "Value", "bSortable": false,Class:"right"},
                ],

                "fnRowCallback": function (nRow, aData, iDisplayIndex) {
                    $("td:first", nRow).html(iDisplayIndex + 1);
                    return nRow;
                },

            });
            $('#non_tag').DataTable({
                bFilter: false, bInfo: false,
                "bPaginate": false,
                "ordering": false,
                "bfooter": false,
                bSortable: false,
                "sScrollY": "350px",
                scrollCollapse: true,
                "info": false,
                "aaData": nontag_details,
                "bAutoWidth": false,
                "columns": [
                      { "data": "", sWidth: "5%", "title": "Sr No.", "defaultContent": "", "bSortable": false },
                      { "data": "item_code", "title": "Item Code", "bSortable": false },
                      { "data": "item_desc", "title": "Item Description", "bSortable": false },
                      { "data": "batch_number", bVisible: true, "title": "Batch Number","bSortable": false },
                      { "data": "required_qty", bVisible: true, "title": "Req Quantity" ,sClass:"right","bSortable": false},
                      { "data": "rate", bVisible: true, "title": "Rate",sClass:"right","bSortable": false },
                      { "data": "value", bVisible: true, "title": "Value", "bSortable": false,Class:"right"},
                ],

                "fnRowCallback": function (nRow, aData, iDisplayIndex) {
                    $("td:first", nRow).html(iDisplayIndex + 1);
                    return nRow;
                },

            });
           
        });

    </script>
}