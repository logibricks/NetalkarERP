@model Sciffer.Erp.Domain.ViewModel.plan_maintenance_order_VM
@using Sciffer.Erp.Domain.Model;
@{
    ViewBag.Title = "Create";
}
<div class="loading">Loading &#8230;</div>
@using (Html.BeginForm("Create", "PlanMaintenanceOrder", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal" style="margin-top:10px;">
        <div>@Html.ValidationSummary(true, "", new { @class = "text-danger" })</div>
        <div class="form-group">

            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.order_no, "Order No. *", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.EditorFor(model => model.order_no, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                            @Html.ValidationMessageFor(model => model.order_no, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.creation_date, "Creation Date *", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.EditorFor(model => model.creation_date, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                            @Html.ValidationMessageFor(model => model.creation_date, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.machine_id, "Machine *", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.DropDownList("machine_id", (System.Web.Mvc.SelectList)ViewBag.mplist, "---Select---", new { @class = "form-control validinput", @required = true, @onchange = "GetUnit(this.value)" })
                            @Html.ValidationMessageFor(model => model.machine_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.machine_category_id, "Machine Category * ", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.DropDownList("machine_category_id", (System.Web.Mvc.SelectList)ViewBag.mcatlist, "---Select---", new { @class = "form-control validinput", @required = true })
                            @Html.ValidationMessageFor(model => model.machine_category_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
          
            <div class="row">
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.maintenance_type_id, "Maintenance type*", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.DropDownList("maintenance_type_id", (System.Web.Mvc.SelectList)ViewBag.mtypelist, new { @class = "form-control validinput", @required = true })
                            @Html.ValidationMessageFor(model => model.maintenance_type_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-sm-6">
                    <div class="form-group">
                        @Html.LabelFor(model => model.plan_maintenance_id, "Plant Maintenance *", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            @Html.DropDownList("plan_maintenance_id", (System.Web.Mvc.SelectList)ViewBag.planMaintenanceList, "--Select--", htmlAttributes: new { @class = "form-control removedisabled", @disabled = "disabled" })
                            @Html.ValidationMessageFor(model => model.plan_maintenance_id, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-body" role="tabpanel" data-example-id="togglable-tabs">
            <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                <li class="active"><a data-toggle="tab" href="#sectionA">Machine Details</a></li>
                <li><a data-toggle="tab" href="#sectionB">Dates</a></li>
                <li><a data-toggle="tab" href="#sectionC">Maintenance Parameters</a></li>
                <li><a data-toggle="tab" href="#sectionD">Costs</a></li>
                <li><a data-toggle="tab" href="#sectionE">Users</a></li>
                <li><a data-toggle="tab" href="#sectionF">Permits & Notifications</a></li>
                <li><a data-toggle="tab" href="#sectionG">Other Information</a></li>
            </ul>
            <div class="tab-content">
                <div id="sectionA" class="tab-pane fade in active" style="margin-top:10px;">
                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.plant_id, "Plant *", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.DropDownList("plant_id", (System.Web.Mvc.SelectList)ViewBag.plantlist, "", htmlAttributes: new { @class = "form-control selectedbycategory" })
                                    @Html.ValidationMessageFor(model => model.plant_id, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.manufacturer, " Manufacturer ", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.manufacturer, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.manufacturer, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.model_no, " Model No.", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.model_no, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.model_no, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-sm-6">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.manufacturer_part_no, "Manufacturer Part No.", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                    <div class="col-md-8 col-sm-8 col-xs-12">
                                        @Html.EditorFor(model => model.manufacturer_part_no, new { htmlAttributes = new { @class = "form-control" } })
                                        @Html.ValidationMessageFor(model => model.manufacturer_part_no, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.manufacturer_serial_no, "Manufacturer Serial No.", htmlAttributes: new { @class = "control-label col-md-4 " })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.manufacturer_serial_no, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.manufacturer_serial_no, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.asset_code_id, "Asset Code", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.asset_code_id, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.asset_code_id, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.asset_tag_no, "Asset Tag No.", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.asset_tag_no, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.asset_tag_no, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="sectionB" class="tab-pane fade" style="margin-top:10px;">

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.schedule_date, "Schedule Date", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.schedule_date, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                                    @Html.ValidationMessageFor(model => model.schedule_date, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.finish_date, "Finish Date", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.finish_date, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                                    @Html.ValidationMessageFor(model => model.finish_date, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>                       
                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.actual_start_date, "Actual Start Date", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.actual_start_date, new { htmlAttributes = new { @class = "form-control", @required = true } })
                                    @Html.ValidationMessageFor(model => model.actual_start_date, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.actual_finish_date, "Actual Finish Date", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.actual_finish_date, new { htmlAttributes = new { @class = "form-control", @required = true } })
                                    @Html.ValidationMessageFor(model => model.actual_finish_date, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>

                </div>


                <div id="sectionC" class="tab-pane fade" style="margin-top:10px;">


                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <button type="button" class="btn btn-primary" style="float:right" data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-plus" onclick="clearmodel();"></span>Add </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="table-responsive">
                            <table class="table table-responsive table-bordered table-striped" id="ContactGrid">
                                <thead>
                                    <tr>
                                        <th><label>ID</label></th>
                                        <th><label>Sr. No.</label></th>
                                        <th><label>Parameter</label></th>
                                        <th><label>Description</label></th>
                                        <th><label>Range</label></th>
                                        <th><label>Actual Result</label></th>
                                        <th><label>Method Used</label></th>
                                        <th><label>Self check/ Vendor TC</label></th>
                                        <th><label>Document Reference</label></th>
                                        <th><label>Action</label></th>

                                    </tr>
                                </thead>

                            </table>
                        </div>
                    </div>

                </div>


                <div id="sectionD" class="tab-pane fade" style="margin-top:10px;">
                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                <div class="col-md-12 col-sm-12 col-xs-12">

                                    <button type="button" class="btn btn-primary" style="float:right" data-toggle="modal" data-target="#myModal1" ><span class="glyphicon glyphicon-plus" onclick="clearmodel1();"></span>Add </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="table-responsive">
                            <table class="table table-responsive table-bordered table-striped" id="ContactGrid1">
                                <thead>
                                    <tr>
                                        <th><label>ID</label></th>
                                        <th><label>Sr. No.</label></th>
                                        <th><label>Item Code</label></th>
                                        <th><label>Item</label></th>
                                        <th><label>Related Parameter</label></th>
                                        <th><label>Required Quantity</label></th>
                                        <th><label>Actual Quantity</label></th>
                                        <th><label>Batch</label></th>
                                        <th><label>SLoc</label></th>
                                        <th><label>Bucket</label></th>
                                        <th><label>Document Number</label></th>
                                        <th><label>Posting Date</label></th>
                                        <th><label>Action</label></th>

                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="sectionE" class="tab-pane fade" style="margin-top:10px;">

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.order_executed_by, "Order Executed By", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.DropDownList("order_executed_by", (System.Web.Mvc.SelectList)ViewBag.employeeList, "--select--", htmlAttributes: new { @class = "form-control removedisabled" })
                                    @Html.ValidationMessageFor(model => model.order_executed_by, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.order_approved_by, "Order Approved By", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                   @Html.DropDownList("order_approved_by", (System.Web.Mvc.SelectList)ViewBag.employeeList, "--select--", htmlAttributes: new { @class = "form-control removedisabled" })
                                   @Html.ValidationMessageFor(model => model.order_approved_by, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>                       
                    </div>               
                </div>

                <div id="sectionF" class="tab-pane fade" style="margin-top:10px;">

                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.permit_no, "Permit No.", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.permit_no, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                                    @Html.ValidationMessageFor(model => model.permit_no, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.notification_no, "Notification No.", htmlAttributes: new { @class = "control-label col-md-4 col-sm-4 col-xs-12" })
                                <div class="col-md-8 col-sm-8 col-xs-12">
                                    @Html.EditorFor(model => model.notification_no, new { htmlAttributes = new { @class = "form-control validinput", @required = true } })
                                    @Html.ValidationMessageFor(model => model.notification_no, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                    </div>                   
                </div>

                <div id="sectionG" class="tab-pane fade" style="margin-top:10px;">
                    <div class="row">
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.remarks, "Remarks", htmlAttributes: new { @class = "control-label col-md-4" })
                                <div class="col-md-8">
                                    @Html.EditorFor(model => model.remarks, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.remarks, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-sm-6">
                            <div class="form-group">
                                @Html.LabelFor(model => model.attachement, "Attachment", htmlAttributes: new { @class = "control-label col-md-4" })
                                <div class="col-md-8">
                                    <input type="file" class="form-control" id="FileUpload" name="FileUpload" accept="application/pdf, image/*" />
                                    @Html.ValidationMessageFor(model => model.attachement, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="productdetail" name="productdetail" />
                        <input type="hidden" id="sr_no" />
                        <input type="hidden" id="deleteids" name="deleteids" />
                        <input type="hidden" id="productdetail1" name="productdetail1" />
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg12 col-sm-12">
                <div class="form-group">
                    <div class="col-md-12 col-sm-12 col-xs-12">
                        <input type="submit" value="Create" data-controller="PlantMaintenance" class="btn btn-success" onclick="TabletoJeson();" style="float:right" id="create" name="create" />
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<div>
    @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-primary" })
</div>
<script src="~/Scripts/RemoveUnexpectedFile.js"></script>
<script src="~/Scripts/requirevalidation.js"></script>
@*@using (Ajax.BeginForm("GetPartial", null, new AjaxOptions
                {
                    HttpMethod = "GET",
                    InsertionMode = InsertionMode.InsertAfter,
                    UpdateTargetId = "CUSTOMER_CONTACT_ID"
                }, new { id = "ContactForm" }))
                {
        <input type="hidden" id="contactCount" name="count" value="@ViewBag.Count" />
    }*@



<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" onclick="clearmodel();">&times;</button>
                <h4 class="modal-title">Details</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Parameter
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="parameter">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3" for="first-name">
                            Description
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="parameter_description">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Range
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="range">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Actual Result
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="actual_result">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Method Used
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="method_used">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Self check/ Vendor TC
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="self_check">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Document Reference
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="document_reference">
                        </div>
                    </div>
                </div>

            </div>
            <br />
            <div class="modal-footer">
                <input type="hidden" id="sr_no" />
                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearmodel();">Close</button>
                <button type="button" class="add btn btn-primary">Add</button>
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="myModal1" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" onclick="clearmodel1();">&times;</button>
                <h4 class="modal-title">Details</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Item *
                        </label>
                        <div class="col-md-7">
                            @Html.DropDownList("item_id", (System.Web.Mvc.SelectList)ViewBag.itemlist, "---Select---", new
                       {
                           @class = "form-control col-md-7 col-xs-12",
                           //@onchange = "GetUnit(this.value)"
                       })
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Related Parameter
                        </label>
                        <div class="col-md-7">
                            @Html.DropDownList("related_parameter", Enumerable.Empty<SelectListItem>(), "", htmlAttributes: new { @class = "form-control" })

                        </div>
                    </div>
                </div>

                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Required Quantity
                        </label>
                        <div class="col-md-7">
                            @Html.DropDownList("quantity", Enumerable.Empty<SelectListItem>(), "", htmlAttributes: new { @class = "form-control" })

                        </div>
                    </div>
                </div>

                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Actual Quantity
                        </label>
                        <div class="col-md-7">
                            <input type="number" class="form-control col-md-7 col-xs-12" id="actual_quantity">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Batch
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="batch">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            SLoc
                        </label>
                        <div class="col-md-7">
                            @Html.DropDownList("storage_location_id", Enumerable.Empty<SelectListItem>(), "", htmlAttributes: new { @class = "form-control" })

                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Bucket
                        </label>
                        <div class="col-md-7">
                            <input type="text" class="form-control col-md-7 col-xs-12" id="bucket">
                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Document Number
                        </label>
                        <div class="col-md-7">
                            @Html.DropDownList("document_numbering_id", Enumerable.Empty<SelectListItem>(), "", htmlAttributes: new { @class = "form-control" })

                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="form-group">
                        <label class="control-label col-md-3">
                            Posting Date
                        </label>
                        <div class="col-md-7">
                            <input type="date" class="form-control col-md-7 col-xs-12" id="posting_date">
                        </div>
                    </div>
                </div>


            </div>
            <br />
            <div class="modal-footer">
                <input type="hidden" id="sr_no" />
                <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="clearmodel1();">Close</button>
                <button type="button" class="add1 btn btn-primary">Add</button>
            </div>
        </div>

    </div>
</div>



@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        var error=@Html.Raw(Json.Encode(ViewBag.error));
        if(error !="")
        {
            sweetAlert("",error,"error");
        }

        $("#machine_id").select2({
            placeholder: "Select Machine",
            allowClear: true
        });
        $("#order_executed_by").select2({
            placeholder: "Select Employee",
            allowClear: true
        });
        $("#order_approved_by").select2({
            placeholder: "Select Employee",
            allowClear: true
        });
        $("#item_id").select2({
            placeholder: "Select Item",
            allowClear: true
        });

        $("#parameter").select2({
            placeholder: "Select parameter",
            allowClear: true
        });
        $(document).ready(function () {

            document.getElementById('actual_start_date').valueAsDate = new Date();
            document.getElementById('actual_finish_date').valueAsDate = new Date();
            document.getElementById('posting_date').valueAsDate = new Date();
            document.getElementById('creation_date').valueAsDate = new Date();


        });


        $(".add").on("click", function (event) {

            var t = $('#ContactGrid').DataTable();

            var rowCount = t.fnGetData().length;
            var parameter = $("#parameter").val();
            var parameter_description = $('#parameter_description').val();
            var range = $("#range").val();
            var actual_result = $("#actual_result").val();
            var method_used = $("#method_used").val();
            var self_check = $("#self_check").val();
            var document_reference = $("#document_reference").val();

            if ($("#sr_no").val() == "") {
                t.fnAddData(['', rowCount + 1, parameter, parameter_description, range, actual_result, method_used, self_check, document_reference, '']);

            }
            else {
                var cc = $("#sr_no").val();
                cc = parseInt(cc) - 1;
                t.fnUpdate(['', cc + 1, parameter, parameter_description, range, actual_result, method_used, self_check, document_reference, ''], cc)
            }
            clearmodel();

            return true;
        });


        $(".add1").on("click", function (event) {

            var t1 = $('#ContactGrid1').DataTable();

            var rowCount = t1.fnGetData().length;
            var item_id = $("#item_id").val();
            var item_name = $('#item_id option:selected').text();
            var related_parameter = $('#related_parameter').val();
            var quantity = $("#quantity").val();
            var actual_quantity = $("#actual_quantity").val();
            var batch = $("#batch").val();
            var storage_location_id = $("#storage_location_id").val();
            var bucket = $("#bucket").val();
            var document_numbering_id = $("#document_numbering_id").val();
            var posting_date = $("#posting_date").val();



            if ($("#sr_no").val() == "")
            {
                t1.fnAddData(['', rowCount + 1, item_id, item_name, related_parameter, quantity, actual_quantity, batch, storage_location_id, bucket, document_numbering_id, posting_date, '']);
            }
            else
            {
                var cc = $("#sr_no").val();
                cc = parseInt(cc)-1;
                t1.fnUpdate(['', cc + 1, item_id, item_name, related_parameter, quantity, actual_quantity, batch, storage_location_id, bucket, document_numbering_id, posting_date, ''], cc)
            }
            clearmodel();

            return true;
        });

        function clearmodel(){
            $("#parameter").val('');
            $("#parameter_description").val('');
            $("#range").val('');
            $("#actual_result").val('');
            $("#method_used").val('');
            $("#self_check").val('');
            $("#document_reference").val('');
            $("#sr_no").val('');

        }
        function clearmodel1() {
            item_id, item_name, related_parameter, quantity, actual_quantity, batch, storage_location_id, bucket, document_numbering_id, posting_date
            $("#item_id").val('').trigger('change');
            $("#related_parameter").val('');
            $("#quantity").val('');
            $("#actual_quantity").val('');
            $("#batch").val('');
            $("#storage_location_id").val('');
            $("#bucket").val('');
            $("#document_numbering_id").val('');
            $("#posting_date").val('');
            $("#sr_no").val('');

        }

        $('#ContactGrid').DataTable({
            "bPaginate": false,
            "ordering": false,
            "bfooter": false,
            "info": false,
            "bLengthChange": false,
            "bAutoWidth": false,
            "bFilter": false,
            "bSort": false,
            aoColumns: [
                     { sname: "a" },
                     { sname: "b" },
                     { sname: "c" },
                     { sname: "d" },
                     { sname: "e" },
                     { sname: "f" },
                     { sname: "i" },
                     { sname: "j" },
                     { sname: "k" },


                     {
                         sname: "l", sWidth: "8%",
                         bSortable: false,
                         mRender: function (data, type, full) {
                             return '<img class="edit" src="../images/writing_file.png" height="20px" width="25px" alt="Edit" onclick="editRow(' + full[1] + ');" /><img class="edit" src="../images/remove.png" height="20px" width="25px" alt="Delete" onclick="deleteRow(' + full[1] + ');" />';
                         }
                     }]

        });
        $('#ContactGrid1').DataTable({
            "bPaginate": false,
            "ordering": false,
            "bfooter": false,
            "info": false,
            "bLengthChange": false,
            "bAutoWidth": false,
            "bFilter": false,
            "bSort": false,
            aoColumns: [
                     { sname: "a" },
                     { sname: "b" },
                     { sname: "c" },
                     { sname: "d" },
                     { sname: "e" },
                     { sname: "f" },
                     { sname: "g" },
                     { sname: "h" },
                     { sname: "i" },
                     { sname: "j" },
                     { sname: "k" },
                     { sname: "l" },

                     {
                         sname: "m", sWidth: "8%",
                         bSortable: false,
                         mRender: function (data, type, full) {
                             return '<img class="edit" src="../images/writing_file.png" height="20px" width="25px" alt="Edit" onclick="editRow1(' + full[1] + ');" /><img class="edit" src="../images/remove.png" height="20px" width="25px" alt="Delete" onclick="deleteRow(' + full[1] + ');" />';
                         }
                     }]

        });

        function TabletoJeson() {

            var t = $('#ContactGrid').DataTable()
            var rowCount = t.fnGetData().length;
            var str;
            var str1;
            var t1 = $('#ContactGrid1').DataTable()
            var rowCount1 = t1.fnGetData().length;
            var str2;
            var str3;
            for (i = 0; i < rowCount; i++) {
                str1 = t.fnGetData(i)[0] + ",";
                str1 = str1 + t.fnGetData(i)[1] + ",";
                str1 = str1 + t.fnGetData(i)[2] + ",";
                str1 = str1 + t.fnGetData(i)[3] + ",";
                str1 = str1 + t.fnGetData(i)[4] + ",";
                str1 = str1 + t.fnGetData(i)[5] + ",";
                str1 = str1 + t.fnGetData(i)[6] + ",";
                str1 = str1 + t.fnGetData(i)[7] + ",";
                str1 = str1 + t.fnGetData(i)[8] + ",";
                str1 = str1 + t.fnGetData(i)[9] + ",";


                if (i == 0) {
                    str = str1 + "~"
                }
                else {
                    str = str + str1 + "~";
                }
            }
            for (i = 0; i < rowCount1; i++) {
                str3 = t1.fnGetData(i)[0] + ",";
                str3 = str3 + t1.fnGetData(i)[1] + ",";
                str3 = str3 + t1.fnGetData(i)[2] + ",";
                str3 = str3 + t1.fnGetData(i)[3] + ",";
                str3 = str3 + t1.fnGetData(i)[4] + ",";
                str3 = str3 + t1.fnGetData(i)[5] + ",";
                str3 = str3 + t1.fnGetData(i)[6] + ",";
                str3 = str3 + t1.fnGetData(i)[7] + ",";
                str3 = str3 + t1.fnGetData(i)[8] + ",";
                str3 = str3 + t1.fnGetData(i)[9] + ",";
                str3 = str3 + t1.fnGetData(i)[10] + ",";
                str3 = str3 + t1.fnGetData(i)[11] + ",";
                str3 = str3 + t1.fnGetData(i)[12] + ",";

                if (i == 0) {
                    str2 = str3 + "~"
                }
                else {
                    str2 = str2 + str3 + "~";
                }
            }
            //  alert(str);
            document.getElementsByName("productdetail")[0].value = str;
            document.getElementsByName("productdetail1")[0].value = str2;
        }


        function editRow() {
            $('#myModal').modal('show');
            var t = $('#ContactGrid').DataTable()
            var cc = parseInt(arguments[0]) - 1;
            $("#sr_no").val(t.fnGetData(cc)[1]);
            $("#planm_order_parameter_id").val(t.fnGetData(cc)[0]);
            $("#parameter").val(t.fnGetData(cc)[2]);
            $('#parameter_description').val(t.fnGetData(cc)[3]);
            $('#range').val(t.fnGetData(cc)[4]);
            $('#actual_result').val(t.fnGetData(cc)[5]);
            $('#method_used').val(t.fnGetData(cc)[6]);
            $('#self_check').val(t.fnGetData(cc)[7]);
            $('#document_reference').val(t.fnGetData(cc)[8]);

        }
        function editRow1() {

            $('#myModal1').modal('show');
            var t1 = $('#ContactGrid1').DataTable()
            var cc = parseInt(arguments[0]) - 1;
            $("#sr_no").val(t1.fnGetData(cc)[1]);
            $("#planm_order_cost_id").val(t1.fnGetData(cc)[0]);
            $("#item_id").val(t1.fnGetData(cc)[2]).trigger('change');;
            $('#related_parameter').val(t1.fnGetData(cc)[4]);
            $('#quantity').val(t1.fnGetData(cc)[5]);
            $('#actual_quantity').val(t1.fnGetData(cc)[6]);
            $('#batch').val(t1.fnGetData(cc)[7]);
            $('#storage_location_id').val(t1.fnGetData(cc)[8]);
            $('#bucket').val(t1.fnGetData(cc)[9]);
            $('#document_numbering_id').val(t1.fnGetData(cc)[10]);
            $('#posting_date').val(t1.fnGetData(cc)[11]);

        }
        function deleteRow() {
            var t = $('#ContactGrid').DataTable()
            var len = t.fnGetData.length;
            var pos;
            for (var l = 0; l <= len; l++) {
                if (t.fnGetData(l) != null) {
                    if (t.fnGetData(l)[1] == arguments[0]) {
                        pos = l;
                    }
                }
            }

            var id = t.fnGetData(pos)[0];

            var deleteids = $("#deleteids").val();

            swal({
                title: "Are you sure?",

                type: "warning",
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Yes, delete it!",
                closeOnConfirm: true

            },
      function (isConfirm) {
          if (isConfirm) {

              $("#deleteids").val(deleteids + "~" + id);
              t.fnDeleteRow(pos);
          }

      });
        }

        function deleteRow1() {
            var t1 = $('#ContactGrid1').DataTable()
            var len = t1.fnGetData.length;
            var pos;
            for (var l = 0; l <= len; l++) {
                if (t1.fnGetData(l) != null) {
                    if (t1.fnGetData(l)[1] == arguments[0]) {
                        pos = l;
                    }
                }
            }

            var id = t1.fnGetData(pos)[0];

            var deleteids = $("#deleteids").val();

            swal({
                title: "Are you sure?",

                type: "warning",
                showCancelButton: true,
                confirmButtonClass: "btn-danger",
                confirmButtonText: "Yes, delete it!",
                closeOnConfirm: true

            },
      function (isConfirm) {
          if (isConfirm) {

              $("#deleteids").val(deleteids + "~" + id);
              t1.fnDeleteRow1(pos);

          }

      });
        }
        function GetUnit(id) {
            if (id != '') {
                $.ajax({
                    type: 'GET',
                    url: "@Url.Action("GetMachineList", "PlanMaintenanceOrder")",
                    data: { id: id },
                    success: function (cycle) {
                        $.each(cycle, function (i, ITEM) {
                            console.log(ITEM);
                            $("#plant_id").val(ITEM.plant_id);
                            $("#manufacturer").val(ITEM.manufacturer);
                            $("#model_no").val(ITEM.model_no);
                            $("#manufacturer_part_no").val(ITEM.manufacturer_part_no);
                            $("#manufacturer_serial_no").val(ITEM.manufacturing_serial_number);
                            $("#asset_code_id").val(ITEM.asset_code_id);
                            $("#asset_tag_no").val(ITEM.asset_tag_no);
                            $("#machine_category_id").val(ITEM.machine_category_id);
                        });
                    },
                    error: function (emp) {

                        $('#plant_id').val('');
                        $('#manufacturer').val('');
                        $('#model_no').val('');
                        $('#manufacturer_part_no').val('');
                        $('#manufacturer_serial_no').val('');
                        $('#asset_code_id').val('');
                        $('#asset_tag_no').val('');
                        $('#machine_category_id').val('');
                    }
                });
            }
            else {
                $('#plant_id').val('');
                $('#manufacturer').val('');
                $('#model_no').val('');
                $('#manufacturer_part_no').val('');
                $('#manufacturer_serial_no').val('');
                $('#asset_code_id').val('');
                $('#asset_tag_no').val('');
                $('#asset_tag_no').val('');
                $('#machine_category_id').val('');
            }

        }

        function onSelect2(args) {
            var id = "";
            var id = args.value.split("-")[0];
            GetUnit(id);
        }

    </script>


}